{"ast":null,"code":"import _classCallCheck from\"C:\\\\Weather-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Weather-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _createSuper from\"C:\\\\Weather-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _inherits from\"C:\\\\Weather-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import Form from'./Form';import Result from'./Result';import'./App.css';//Klucz do Api\nvar APIKey='1355db29be412c4bf1999ff232919774';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={value:'',country:'',date:'',city:'',temp:'',weather:'',tempMin:'',tempMax:'',icon:'',err:'false'};_this.handleInputChange=function(e){_this.setState({value:e.target.value});};return _this;}_createClass(App,[{key:\"componentDidUpdate\",// handleCitySubmit = (e) => {\n//   e.preventDefault();\n//   const API = `http://api.openweathermap.org/data/2.5/weather?q=${this.state.value}&appid=${APIKey}&units=metric`;\n// fetch(API)\n// .then(response => {\n//   if(response.ok){\n//     return response\n//   }\n//   throw Error(\"Nie udało się\")\n// }) //Spelniony\n// .then(response => response.json())\n// .then(data => {\n//   const time = new Date().toLocaleString()\n//   this.setState(state => ({\n//   err: false,\n//   date: time,\n//   city: state.value,\n//   sunrise: data.sys.sunrise,\n//   sunset: data.sys.sunset,\n//   temp: data.main.temp,\n//   pressure: data.main.pressure,\n//   wind: data.wind.speed,\n// }))\n// })\n// .catch(err => {\n//   console.log(err);\n// this.setState(prevState => ({\n//     err:true,\n//     city: prevState.value\n//     }))\n//   }) //Odrzucony\n// }\nvalue:function componentDidUpdate(prevProps,prevState){var _this2=this;// console.log(prevState.value);\n// console.log(this.state.value);\nif(this.state.value.length===0)return;if(prevState.value!==this.state.value){if(location.protocol==='http:'){var API=\"http://api.openweathermap.org/data/2.5/weather?q=\".concat(this.state.value,\"&appid=\").concat(APIKey,\"&units=metric\");}else{API=\"http://api.openweathermap.org/data/2.5/weather?q=\".concat(this.state.value,\"&appid=\").concat(APIKey,\"&units=metric\");}//const API = `http://api.openweathermap.org/data/2.5/weather?q=${this.state.value}&appid=${APIKey}&units=metric`;\nfetch(API).then(function(response){if(response.ok){return response;}throw Error(\"Nie udało się\");})//Spelniony\n.then(function(response){return response.json();}).then(function(data){var time=new Date().toLocaleString();_this2.setState(function(state){return{err:false,date:time,city:data.name,temp:data.main.temp,tempMax:data.main.temp_max,tempMin:data.main.temp_min,weather:data.weather[0].main,icon:data.weather[0].icon,country:data.sys.country};});}).catch(function(err){console.log(err);_this2.setState(function(prevState){return{err:true,city:prevState.value};});});//Odrzucony\n}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(Form,{value:this.state.value,change:this.handleInputChange,submit:this.handleCitySubmit}),/*#__PURE__*/React.createElement(Result,{weather:this.state}));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["C:/Weather-app/src/components/App.js"],"names":["React","Component","Form","Result","APIKey","App","state","value","country","date","city","temp","weather","tempMin","tempMax","icon","err","handleInputChange","e","setState","target","prevProps","prevState","length","location","protocol","API","fetch","then","response","ok","Error","json","data","time","Date","toLocaleString","name","main","temp_max","temp_min","sys","catch","console","log","handleCitySubmit"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Form from './Form';\r\nimport Result from './Result';\r\nimport './App.css';\r\n//Klucz do Api\r\nconst APIKey ='1355db29be412c4bf1999ff232919774';\r\n\r\nclass App extends Component {\r\nstate = {\r\n  value: '',\r\n  country: '',\r\n  date: '',\r\n  city: '',\r\n  temp: '',\r\n  weather: '',\r\n  tempMin: '',\r\n  tempMax: '',\r\n  icon: '',\r\n  err : 'false',\r\n}\r\n\r\nhandleInputChange = (e) => {\r\n    this.setState({\r\n      value: e.target.value\r\n    })\r\n}\r\n\r\n// handleCitySubmit = (e) => {\r\n//   e.preventDefault();\r\n\r\n//   const API = `http://api.openweathermap.org/data/2.5/weather?q=${this.state.value}&appid=${APIKey}&units=metric`;\r\n\r\n// fetch(API)\r\n// .then(response => {\r\n//   if(response.ok){\r\n//     return response\r\n//   }\r\n//   throw Error(\"Nie udało się\")\r\n// }) //Spelniony\r\n// .then(response => response.json())\r\n// .then(data => {\r\n//   const time = new Date().toLocaleString()\r\n\r\n//   this.setState(state => ({\r\n//   err: false,\r\n//   date: time,\r\n//   city: state.value,\r\n//   sunrise: data.sys.sunrise,\r\n//   sunset: data.sys.sunset,\r\n//   temp: data.main.temp,\r\n//   pressure: data.main.pressure,\r\n//   wind: data.wind.speed,\r\n// }))\r\n// })\r\n// .catch(err => {\r\n//   console.log(err);\r\n// this.setState(prevState => ({\r\n//     err:true,\r\n//     city: prevState.value\r\n//     }))\r\n//   }) //Odrzucony\r\n\r\n\r\n// }\r\n\r\ncomponentDidUpdate(prevProps, prevState){\r\n  // console.log(prevState.value);\r\n  // console.log(this.state.value);\r\n\r\n  if(this.state.value.length === 0) return;\r\n  if(prevState.value !== this.state.value){\r\n\r\n    if (location.protocol === 'http:') {\r\n      var API = `http://api.openweathermap.org/data/2.5/weather?q=${this.state.value}&appid=${APIKey}&units=metric`;\r\n    }else{\r\n      API = `http://api.openweathermap.org/data/2.5/weather?q=${this.state.value}&appid=${APIKey}&units=metric`;\r\n    }\r\n    //const API = `http://api.openweathermap.org/data/2.5/weather?q=${this.state.value}&appid=${APIKey}&units=metric`;\r\n\r\n  fetch(API)\r\n  .then(response => {\r\n    if(response.ok){\r\n      return response\r\n    }\r\n    throw Error(\"Nie udało się\")\r\n  }) //Spelniony\r\n  .then(response => response.json())\r\n  .then(data => {\r\n    const time = new Date().toLocaleString()\r\n\r\n    this.setState(state => ({\r\n    err: false,\r\n    date: time,\r\n    city: data.name,\r\n    temp: data.main.temp,\r\n    tempMax: data.main.temp_max,\r\n    tempMin: data.main.temp_min,\r\n    weather: data.weather[0].main,\r\n    icon: data.weather[0].icon,\r\n    country: data.sys.country\r\n  }))\r\n  })\r\n  .catch(err => {\r\n    console.log(err);\r\n  this.setState(prevState => ({\r\n      err:true,\r\n      city: prevState.value\r\n      }))\r\n    }) //Odrzucony\r\n  }\r\n}\r\n\r\nrender() {\r\n  return (\r\n    <div className=\"App\">\r\n      <Form\r\n      value={this.state.value}\r\n      change={this.handleInputChange}\r\n      submit={this.handleCitySubmit}/>\r\n      <Result weather={this.state}/>\r\n\r\n    </div>\r\n  );\r\n}\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}